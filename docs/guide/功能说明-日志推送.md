# 日志监控

计划任务运行过程中, 关键的成功或失败信息可以通过您配置的 Telegram 账号发送给您.

这些日志将可以通过 [Bot](https://t.me/embykeeper_bot) -> `/start` -> `消息推送` -> `历史信息` 查看.

同时也会在每日您配置的时间推送当日的关键日志.

您可以在 [Bot](https://t.me/embykeeper_bot) -> `/start` -> `消息推送` 界面关闭推送或调整每日推送时间.

**注意**: 启动后首次运行, 将不会发送相关日志.

## 开启条件

### Telegram 推送的开启条件

1. 只有定时任务 (不是运行后立刻执行的一次签到 / 保活) 才会发送日志推送.

2. 您至少需要曾向 [Bot](https://t.me/embykeeper_bot) 发送过一条消息, 并在机器人的 `消息推送` 菜单中启用推送 (默认开启).

3. [配置文件](/guide/配置文件#telegram-account-子项)有至少一个 Telegram 账户配置:

   ```toml
   [[telegram.account]]
   phone = "+8616401875896"
   ```

4. [配置文件](/guide/配置文件#notifier-子项)设置并启用了 `notifier` 配置:

   ```toml
   [notifier]
   # 启用签到/保活结果的日志推送:
   enabled = true
   # 使用第几个 Telegram 账号进行推送, 从 1 开始计数:
   account = 1
   # 默认情况下, 日志推送将在每天指定时间统一推送 (在 @embykeeper_bot 设置), 设置为 false 以立刻推送
   immediately = false
   # 默认情况下, 启动时立刻执行的一次签到/保活不会推送消息, 设置为 true 以推送
   once = false
   # 推送方式, 可选: telegram (默认), apprise
   method = "telegram"
   ```

### Apprise 推送的开启条件

1. 只有定时任务 (不是运行后立刻执行的一次签到 / 保活) 才会发送日志推送.

2. [配置文件](/guide/配置文件#notifier-子项)设置并启用了 `notifier` 配置, 且推送方式设为 `apprise`:

   ```toml
   [notifier]
   enabled = true
   method = "apprise"
   apprise_uri = "bark://hostname/device_key"
   ```

::: tip 提示
使用 Apprise 推送时**不需要**配置 Telegram 账户, 也不需要向 Bot 发送消息.
:::

## 推送方式

### Telegram 推送 (默认)

Telegram 推送是默认的推送方式, 通过您配置的 Telegram 账号将日志发送到 [EmbyKeeper Bot](https://t.me/embykeeper_bot).

使用条件：

- 需要配置至少一个 Telegram 账号
- 需要向 Bot 发送过消息并启用推送

### Apprise 推送

[Apprise](https://github.com/caronc/apprise) 是一个支持多种推送服务的库, 支持包括 Bark、钉钉、微信、邮件等在内的多种推送方式.

配置示例：

```toml
[notifier]
enabled = true
method = "apprise"
apprise_uri = "bark://hostname/device_key"
```

更多支持的服务请参考 [Apprise 官方文档](https://github.com/caronc/apprise).

::: tip 提示
使用 Apprise 推送时不需要配置 Telegram 账号.
:::
